\documentclass[french]{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[a4paper]{geometry}
\usepackage{babel}
\usepackage{fancyhdr}
\usepackage[hidelinks]{hyperref}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{pgfgantt}
\geometry{bottom=3cm, top=3cm}
\hypersetup{colorlinks=true}



\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height 1pt\hfill \kern \z@}
\def\maketitle{%
  \null
  \thispagestyle{empty}%
  \vskip 1cm
  \begin{center}
    \Huge \strut \@title \par
    \large \strut Travail de semestre
  \end{center}
  \ifhmode\par\fi
  \hbox to \hsize{\hfill
    \vrule height 2pt width.5\hsize
    \hfill}%
  \begin{center}
  	\normalfont\large CFPT Informatique\par
    \normalfont\large\@author\par
    \normalfont T.IS-E2A
  \end{center}
%IMG A METTRE ICI
  \begin{center}
    \normalfont\large 2014
  \end{center}
  \par
  \vfil
  \vfil
  \null
  \cleardoublepage
  }



\makeatother

\title{Twitch Alert}
\author{Jean-Philippe Froelicher}
\date{}

\pagestyle{fancy}
\lhead{Twitch Alert}
\lfoot{Jean-Philippe Froelicher}
\rfoot{\today}
\renewcommand{\footrulewidth}{0.4pt}

\begin{document}

\maketitle
\newpage
\tableofcontents
\newpage

\part{Cahier des charges}
\section{Initial}
\subsection{Titre du projet}
Twitch \textit{Alert}
\subsection{Objectifs du projet}
Créer une application de notification(alerte) pour la plateforme de diffusion de \textit{streaming} \textbf{TWITCH}. \\
Apprentissage et prise en main de l'API\footnote{Application Programming Interface} Twitch.
\subsection{Description du projet}

\noindent
\textbf{Glossaire :} \\
stream (n.m) : Flux vidéo.\\
streamer (v.) : L'action de diffuser du flux vidéo.\\
streaming (n.m) : Diffusion de vidéos en continu.\\
streameur (n.m) : Personne diffusant une vidéo en continu.\\
Twitch : Site permettant à n'importe qui de diffuser du flux vidéo, chaque utilisateur a une chaine Twitch permettant de diffuser du flux vidéo. \\
Chaîne Twitch : Un utilisateur Twitch a forcément une chaine Twitch qu'il utilise que lorsqu'il diffuse du flux vidéo.

\noindent
\textbf{Général :} \\
Une vue principale qui permet de configurer les différentes notifications et alertes pour chaque flux vidéo (stream). \\
L'application tourne en tâche de fond, c'est-à-dire qu'une icône apparait dans la barre de tâche lorsque l'on réduit la fenêtre de l'application. Pour y accéder on clique sur l'icône de la barre de tâche.\\
Une notification est représentée sous forme de \textit{pop-up}(petite fenêtre) qui apparait en bas à droite de l'écran principal, un petit son est émis lorsque la notification apparait si l'utilisateur ne la voit pas.
\newpage
\begin{center}
\textbf{Twitch}
\includegraphics[scale=0.8]{img/schemaTwitch.png}
\end{center}
\begin{itemize}
\item La plateforme Twitch permet de suivre des streameurs "indépendants", actuellement, lorsqu'un streameur commence son stream, une notification est envoyée par e-mail. Le but est de pouvoir saisir le nom Twitch du streameur, et lorsque il commence son stream, mon application notifie l'utilisateur.
\item Pouvoir regarder le stream d'un utilisateur Twitch.
\item Gestion des notification pour chaque chaine Twitch.
\item Gestion des plages horaires de notifications pour chaque chaine Twitch
\end{itemize}

\newpage
\part{Étude d'opportunité}
\section{Introduction au projet}
Le but de ce projet est de réaliser une application de notification pour la plateforme de diffusion de streaming Twitch ainsi que toute la gestion de ses notifications.

\subsection{Twitch}
Twitch est une plateforme de diffusion de streaming et de VOD\footnote{\textit{Video On Demand}} de jeux vidéo créée en 2011.
C'est la plateforme numéro un pour les amateurs de streaming, toutes personnes voulant commencer dans ce monde est quasiment obligé de passer par Twitch.\\
La plateforme donne la possibilité de pouvoir transmettre du flux vidéo sur la chaine Twitch de l'utilisateur en question.
\subsubsection{Chaîne}
Une chaîne Twitch offre une multitude de possibilité pour l'utilisateur spectateur, effectivement une chaine n'est pas simplement un flux vidéo.
Il y a la fonction "Suivre" une chaîne Twitch, qui permet aux spectateurs de pouvoir être tenu au courant via e-mail mais aussi d'accéder plus rapidement à la chaîne en question.
Il y a également une fonction "S'abonné" qui est payante, le prix varie selon la chaine. En revanche, cette fonction offre quelques avantages pas très significatifs car l'abonnement sert surtout à soutenir financièrement directement la chaîne Twitch.
\subsubsection{Team}
Une team Twitch est un groupe de chaîne Twitch, la notion de team permet uniquement de retrouver les différentes chaîne d'un groupe de streaming, ou d'une team professionnelle de jeu etc...
\subsubsection{Suivis (Following)}
Un utilisateur Twitch a la possibilité de suivre une chaîne Twitch, le principe du "suivis" est que chaque fois que la chaîne commence à diffuser du flux, les utilisateurs qui suivent cette chaîne sont prévenu via e-mail.

\subsection{Pourquoi avoir choisi ce sujet ?}
J'ai choisi ce sujet parce que je porte un réel intérêt au monde du streaming. En effet, je regarde régulièrement des streams sur des chaînes de la plateforme de streaming Twitch. N'étant jamais au courant de quel streameur est en train de diffuser à moment donné, j'ai donc pensé à une application qui notifie et informe l'utilisateur des différents streams en cours.
\subsection{Pourquoi une application de bureau ?}
Au départ, je voulais créer une application mobile, ce qui augmente l'intérêt de l'application mais, le temps laissé à disposition n'est pas assez conséquent et donc étant novice dans la programmation mobile j'ai décidé de créer une application de bureau que je pourrai peut-être porter plus tard sur mobile.
\subsection{Pourquoi C\#?}
J'ai choisi de développer mon application en C\# car c'est le langage que je connais le mieux actuellement, et je pense également que c'est le langage qui est le plus adapté pour l'application à réaliser car elle est sur Windows.

\section{Analyse de l'existant}
\subsection{Existant}
Étant donner que le streaming est un monde nouveau il y a peu d'application sur ce sujet, en effet les seules applications sont :
\begin{itemize}
\item \textbf{Twitch} : Application mobile officielle de la plateforme de streaming Twitch
\item \textbf{Twitch now} : Application Google Chrome
\item \textbf{Twitch Notifier} : Application Google Chrome
\end{itemize}
\subsection{Critique de l'existant}
\noindent
\textbf{Twitch} : Cette application sert à accéder à la plateforme de streaming Twitch. En effet, c'est l'application officielle, il y a donc la possibilité de visionner n'importe quelles chaines Twitch, la possibilité de se connecter à la plateforme pour voir toutes les chaînes que l'utilisateur suit.
\textbf{Twitch now} : Cette application permet à l'utilisateur de naviguer dans les différents streams de Twitch, c'est une application Google Chrome de Twitch, elle permet de naviguer dans Twitch sans aller sur le site. Le système de suivi est celui de Twitch, c'est-à-dire que lorsque dans l'application on suit une chaîne Twitch, dans le compte Twitch de l'utilisateur la chaine s'ajoute également dans la liste de suivi. \\
\textbf{Twitch notifier} : Cette application permet à l'utilisateur d'être notifié lorsqu'un stream commence. C'est une application pour Google Chrome donc inutilisable si l'utilisateur n'utilise pas Google Chrome. C'est une application qui s'approche beaucoup de celle que je réalise car on peut saisir, dans l'application, la chaîne Twitch d'un streameur et lorsque ce streameur commence à streamer, une notification s'affiche sous forme de pop-up.\\
La lecture des flux vidéos se fait directement sur le site Twitch.

\newpage
\section{Analyse fonctionnelle}

\subsection{Gestion des chaines}
La gestion des chaines à pour but de gérer les différentes chaine. Elle se compose comme ceci : Liste des streams en ligne et hors-ligne, détail d'une chaine Twitch.\\
La liste des streams en ligne affiche les streams que l'utilisateur suit et qui sont actuellement en ligne, la liste des stream hors-ligne affiche les streams que l'utilisateur suit et qui sont actuellement hors-ligne. Les différentes options de configuration sur chaque stream sont accessible depuis ces liste. \\
Le détail d'une chaine Twitch consiste à afficher toutes les informations concernant une chaine Twitch, en effet, c'est depuis là que l'utilisateur peut visualiser le stream de la chaine, également la possibilité d'afficher le chat de la chaine, toutes les fonctions de bases de Twitch pour une chaine est repris ici.

\subsection{Recherche d'une chaine}
Il y a différente manière de rechercher une chaine sur Twitch :
\begin{itemize}
\item Recherche par nom de chaine
\item Recherche par jeux
\item Recherche par popularité
\end{itemize}
L'application reprend les mêmes filtres que le site Twitch.

\subsection{Ajout d'une chaîne}
L'ajour d'une chaine Twitch se fait directement depuis le détail d'une chaine ou depuis les résultats d'une recherche. Le terme "Ajout" signifie que l'on ajoute la chaîne à la liste des Suivis de l'utilisateur courant.

\subsection{Gestion des notifications}
La gestion des notifications à pour but de gérer les notifications d'un stream lorsqu'il démarre.  

\subsection{Interface homme-machine}
\subsubsection{Vue principale}
La vue principale permet à l'utilisateur connecté à Twitch de s'informer des différents streams en cours. Elle permet également de rechercher une chaine Twitch pour la regarder ou pour la suivre.
C'est depuis cette vue que l'on peut accéder à la configuration des notifications de chaque chaine suivis.
\begin{center}
\includegraphics[scale=0.6]{img/vueprincipaletwitch.png}
\end{center}
\begin{enumerate}
\item Affiche les suivis du comptes Twitch actuellement connecté
\item Affiche les streams populaire actuel de Twitch
\item Permet de se connecter à Twitch
\end{enumerate}

\begin{center}
\includegraphics[scale=0.6]{img/vueprincipalestream.png}
\end{center}
\begin{enumerate}
\item Paramètre sur lequel la recherche va être effectuée
\item Information concernant le stream
\item Champ de saisie pour la recherche
\item Bouton pour accéder à la configuration de la chaine
\item Bouton pour lire le stream depuis l'application
\end{enumerate}
\newpage
\section{Analyse organique}
\subsection{Diagramme de classe}

\subsection{API Twitch (Twitch.Net)}
L'API Twitch sert à récupérer les différentes informations d'un flux vidéo sur Twitch. Elle utilise un lien URL pour retrouver toutes les informations d'un stream : \begin{center}https://api.twitch.tv/kraken/channels/[nom de la chaîne Twitch]\end{center}
Toutes les informations que l'API appelle se fait depuis cette page qui est formatée en JSON\footnote{JavaScript Object Notation}.

L'API est composé de cette manière :
\begin{itemize}
\item Channels : Informations concernant une chaîne Twitch
\item Chat : Informations concernant le \textit{chat} de la chaîne Twitch
\item Follows : Informations concernant les "suiveurs" de la chaîne Twitch
\item Games : Informations concernant le jeu en cours sur la chaîne Twitch
\item Search : Recherche des streams et des jeux
\item Streams : Informations concernant le stream
\item Subscriptions : Informations concernant les abonnements de la chaîne Twitch
\item Teams : Informations concernant une team sur Twitch
\item Users : Informations concernant un utilisateur
\item Videos : Informations concernant les vidéos de la chaine Twitchs
\end{itemize}

\subsubsection{OAuth 2.0}
Pour l'authentification d'un utilisateur Twitch sur une application externe, l'API utilise le protocole \textbf{OAuth 2.0}, en effet, ce protocole permet d'obtenir un accès limité à un service via HTTP par le biais d'une autorisation.
La demande d'accès est demandée par le "client", dans notre cas, l'application est le client.\\

OAuth2 définit 4 rôles :
\begin{itemize}
\item Détenteur des données (Nous-même)
\item Serveur de ressources (Twitch)
\item Le client (Twitch Alert)
\item Serveur d'autorisation (Twitch)
\end{itemize}

\noindent
\textbf{Token(jeton)}\\
Lorsque le client fait une demande d'authentification, le serveur d'autorisation délivre un token. Un token permet au serveur de ressources d'autoriser la mise à disposition des données d'un utilisateur. Un token à une durée de vie limité qui est définie par le serveur qui délivre les tokens. Un token doit rester le plus confidentiel possible, même l'utilisateur des ressources ne voit pas le token.\\

\noindent
\textbf{Scope(portée)}\\
Le scope est un paramètre qui sert à définir des droits sur le token. Le serveur d'autorisation propose une liste de scope disponible puis, lors de la demande d'un token, il faut spécifié les scopes à mettre en place.\\

\noindent
\textbf{Type d'autorisation}\\
Il existe deux types d'autorisation, celui qui nous intéresse est : L'autorisation implicite (\textit{Implicit Grant})
L'autorisation implicite s'utilise quand l'application se trouve coté client, ce qui est notre cas.
La demande se fait de la sorte :
\begin{enumerate}
\item L'application souhaite accéder aux données Twitch de votre compte
\item Redirigé dans un navigateur web par l'application vers le serveur d'autorisation
\item Si l'accès est autorisé, le serveur d'autorisation délivre le token et on peut le voir dans l'url.
\item On utilise le token pour faire des appels à l'API de Twitch.
\end{enumerate}

\begin{center}
\includegraphics[scale=0.8]{img/SchemaOAuth2.png}
\end{center}

\subsubsection{Site d'autorisation}
Lorsqu'un utilisateur veut se connecter et ainsi autoriser le compte à utiliser mon application, celui-ci est redirigé vers un site internet. Ce site internet que l'on à accès via : \url{http://froelicher.github.io/TwitchAlert/}. Ce site a été mis en ligne par moi-même mais le code a été pris de l'exemple donné par Twitch dans la documentation de OAuth 2.0. \\
C'est également sur ce site que l'on récupère le token dans l'URL.

\subsubsection{cURL}
\textbf{C}lient \textbf{URL} \textbf{R}equest \textbf{L}ibrary est une interface en ligne de commande. Elle permet de récupérer des données d'une ressource accessible par réseau. On désigne la ressource à partir d'une URL.

\begin{center}
\includegraphics[scale=1]{img/curlExample.png}
\end{center}
Ci-dessus un exemple de requête envoyée pour récupérer les données d'une ressource.

Dans notre cas, nous envoyons une requête de type "GET" pour récupérer par exemple les informations d'une chaîne puis on reçois les données.\\
Les différents type de requêtes :
\begin{itemize}
\item GET
\item POST
\item PUT
\item DELETE
\end{itemize}

\section{Tests}

\section{Conclusion}

\section{Glossaire}


\section{Annexes}
\subsection{Planification}
\subsubsection{Planification prévisionnelle}
\begin{ganttchart}[hgrid,vgrid,x unit=8mm,y unit chart=6mm,group left shift=0,group right shift=0,group peaks tip position=0,group peaks height=.4]{1}{14}
\gantttitle{\textbf{2014}}{4}
\gantttitle{\textbf{2015}}{10}\ganttnewline
\gantttitle{\textbf{Décembre}}{3}
\gantttitle{\textbf{Janvier}}{4}
\gantttitle{\textbf{Février}}{3}
\gantttitle{\textbf{Mars}}{4}\ganttnewline
\gantttitlelist{3,9,17,6,14,21,28,4,18,25,4,10,18,25}{1}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Cahier des charges}{1}{1}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Recherche}{2}{7}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Analyse fonctionnelle}{2}{6}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Analyse organique}{6}{8}
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{}{8}{9}\ganttnewline
\ganttmilestone{Rapport intermédiaire}{7}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Développement}{8}{12}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Test+Rapport}{11}{12}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Documentation}{1}{8}
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{}{8}{12}\ganttnewline
\ganttmilestone{Rapport final}{13}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Présentation}{13}{14}
\ganttlink{elem4}{elem5}
\ganttlink{elem5}{elem6}
\ganttlink{elem9}{elem10}
\ganttlink{elem10}{elem11}
\end{ganttchart}

\subsubsection{Planning réel}
\begin{ganttchart}[hgrid,vgrid,x unit=8mm,y unit chart=6mm,group left shift=0,group right shift=0,group peaks tip position=0,group peaks height=.4]{1}{14}
\gantttitle{\textbf{2014}}{4}
\gantttitle{\textbf{2015}}{10}\ganttnewline
\gantttitle{\textbf{Décembre}}{3}
\gantttitle{\textbf{Janvier}}{4}
\gantttitle{\textbf{Février}}{3}
\gantttitle{\textbf{Mars}}{4}\ganttnewline
\gantttitlelist{3,9,17,6,14,21,28,4,18,25,4,10,18,25}{1}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Cahier des charges}{1}{1}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Recherche}{2}{7}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Analyse fonctionnelle}{2}{6}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Analyse organique}{6}{8}
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{}{8}{9}\ganttnewline
\ganttmilestone{Rapport intermédiaire}{7}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Développement}{8}{12}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Test+Rapport}{11}{12}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=green}]{Documentation}{1}{8}
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{}{8}{12}\ganttnewline
\ganttmilestone{Rapport final}{13}\ganttnewline
\ganttbar[bar height=.6, bar top shift=.2, bar/.append style={fill=red}]{Présentation}{13}{14}
\ganttlink{elem4}{elem5}
\ganttlink{elem5}{elem6}
\ganttlink{elem9}{elem10}
\ganttlink{elem10}{elem11}
\end{ganttchart}
\end{document}
